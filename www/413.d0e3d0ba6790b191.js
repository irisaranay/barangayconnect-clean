"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[413],{413:(x,d,a)=>{a.r(d),a.d(d,{LoginPage:()=>b});var l=a(467),s=a(9420),c=a(4341),p=a(2200),e=a(3664),_=a(8728),u=a(5530),h=a(1815),m=a(8492);function f(g,P){if(1&g){const n=e.RV6();e.j41(0,"ion-icon",27),e.bIt("click",function(){_.eBV(n);const t=e.XpG();return _.Njj(t.togglePasswordVisibility())}),e.k0s()}if(2&g){const n=e.XpG();e.Y8G("name",n.showPassword?"eye-off":"eye")}}let b=(()=>{class g{constructor(n,o,t,r){this.router=n,this.registrationService=o,this.toastController=t,this.storage=r,this.phone="",this.password="",this.rememberMe=!1,this.showPassword=!1,this.passwordFocused=!1}ngOnInit(){var n=this;return(0,l.A)(function*(){yield n.storage.create();const o=yield n.storage.get("savedPhone");o?.startsWith("+63")&&(n.phone=o.slice(3),n.rememberMe=!0)})()}normalizePhone(n){const o=n.trim().replace(/\D/g,"");return o.startsWith("0")?"+63"+o.slice(1):o.startsWith("9")&&10===o.length?"+63"+o:o}login(){var n=this;return(0,l.A)(function*(){const o=n.phone.trim(),t=o.replace(/\D/g,"");if(/\D/.test(o))return void n.presentToast("\u26a0\ufe0f Phone number must contain numbers only.","warning");if(!o||!n.password)return void n.presentToast("\u26a0\ufe0f Please enter your phone number and password.","warning");if(10!==t.length)return void n.presentToast("\u26a0\ufe0f Phone number must be exactly 10 digits.","warning");const r="+63"+t,i=yield n.registrationService.checkLogin(r,n.password);if(i)switch(n.presentToast("\u2705 Login successful!","success"),n.rememberMe?yield n.storage.set("savedPhone",r):yield n.storage.remove("savedPhone"),n.registrationService.setCurrentUser(i),i.role){case"secretary":n.router.navigate(["/secretary-dashboard"]);break;case"captain":n.router.navigate(["/captain-dashboard"]);break;default:n.router.navigate(["/resident-dashboard"])}else n.presentToast("\u274c Invalid phone number or password.","danger")})()}restrictPhoneInput(n){this.phone=n.target.value.replace(/\D/g,"").slice(0,10)}togglePasswordVisibility(){this.showPassword=!this.showPassword}goToForgotPassword(){this.router.navigate(["/forgot-password"])}goToRegister(){this.router.navigate(["/registration"])}presentToast(n,o){var t=this;return(0,l.A)(function*(){yield(yield t.toastController.create({message:n,duration:2500,color:o,position:"top"})).present()})()}static#e=this.\u0275fac=function(o){return new(o||g)(e.rXU(u.Ix),e.rXU(h.f),e.rXU(s.K_),e.rXU(m.w))};static#n=this.\u0275cmp=e.VBU({type:g,selectors:[["app-login"]],decls:39,vars:6,consts:[[1,"login-content",3,"fullscreen"],[1,"background-overlay"],[1,"login-wrapper"],[1,"login-container","adjusted"],[1,"logo-circle"],["src","assets/logo.jpg","alt","Logo"],[1,"logo-title"],[1,"subtext"],[1,"divider"],[3,"submit"],[1,"phone-container"],["fill","outline","lines","none",1,"phone-box","prefix-box"],[1,"prefix-label"],["fill","outline","lines","none",1,"phone-box","input-box"],["position","floating"],["type","tel","inputmode","numeric","pattern","[0-9]*","maxlength","10","name","phone",3,"ngModelChange","ionInput","ngModel"],["fill","outline",1,"custom-input","center-input"],["name","password","required","",1,"center-text",3,"ngModelChange","focus","blur","type","ngModel"],["slot","end","style","cursor: pointer; font-size: 22px;",3,"name","click",4,"ngIf"],[1,"checkbox-forgot-row"],["lines","none",1,"checkbox-row"],["slot","start","name","rememberMe",1,"custom-checkbox",3,"ngModelChange","ngModel"],[1,"checkbox-label"],[1,"forgot-password",3,"click"],["expand","block","type","submit",1,"ion-margin-top","login-btn"],[1,"ion-text-center","ion-margin-top"],[3,"click"],["slot","end",2,"cursor","pointer","font-size","22px",3,"click","name"]],template:function(o,t){1&o&&(e.j41(0,"ion-content",0),e.nrm(1,"div",1),e.j41(2,"div",2)(3,"div",3)(4,"div",4),e.nrm(5,"img",5),e.k0s(),e.j41(6,"h1",6),e.EFF(7,"BARANGAY CONNECT"),e.k0s(),e.j41(8,"p",7),e.EFF(9,"Where requests meet results"),e.k0s(),e.nrm(10,"div",8),e.j41(11,"form",9),e.bIt("submit",function(){return t.login()}),e.j41(12,"div",10)(13,"ion-item",11)(14,"ion-label",12),e.EFF(15,"(+63)"),e.k0s()(),e.j41(16,"ion-item",13)(17,"ion-label",14),e.EFF(18,"Phone Number"),e.k0s(),e.j41(19,"ion-input",15),e.mxI("ngModelChange",function(i){return e.DH7(t.phone,i)||(t.phone=i),i}),e.bIt("ionInput",function(i){return t.restrictPhoneInput(i)}),e.k0s()()(),e.j41(20,"ion-item",16)(21,"ion-label",14),e.EFF(22,"Password"),e.k0s(),e.j41(23,"ion-input",17),e.mxI("ngModelChange",function(i){return e.DH7(t.password,i)||(t.password=i),i}),e.bIt("focus",function(){return t.passwordFocused=!0})("blur",function(){return t.passwordFocused=!1}),e.k0s(),e.DNE(24,f,1,1,"ion-icon",18),e.k0s(),e.j41(25,"div",19)(26,"ion-item",20)(27,"ion-checkbox",21),e.mxI("ngModelChange",function(i){return e.DH7(t.rememberMe,i)||(t.rememberMe=i),i}),e.k0s(),e.j41(28,"ion-label",22),e.EFF(29,"Remember Me"),e.k0s()(),e.j41(30,"a",23),e.bIt("click",function(){return t.goToForgotPassword()}),e.EFF(31,"Forgot Password?"),e.k0s()(),e.j41(32,"ion-button",24),e.EFF(33," Login "),e.k0s(),e.j41(34,"div",25)(35,"ion-text"),e.EFF(36,"New user? "),e.j41(37,"a",26),e.bIt("click",function(){return t.goToRegister()}),e.EFF(38,"Create Account"),e.k0s()()()()()()()),2&o&&(e.Y8G("fullscreen",!0),e.R7$(19),e.R50("ngModel",t.phone),e.R7$(4),e.Y8G("type",t.showPassword?"text":"password"),e.R50("ngModel",t.password),e.R7$(),e.Y8G("ngIf",t.password||t.passwordFocused),e.R7$(3),e.R50("ngModel",t.rememberMe))},dependencies:[s.bv,s.Jm,s.eY,s.W9,s.iq,s.$w,s.uz,s.he,s.IO,s.hB,s.Gw,c.YN,c.qT,c.BC,c.cb,c.YS,c.tU,c.R_,c.vS,c.cV,p.MD,p.bT],styles:[".login-content[_ngcontent-%COMP%]{--background: #f0f4f8;position:relative;height:100%;font-family:Segoe UI,sans-serif;display:flex;justify-content:center;align-items:center;overflow:hidden;flex-direction:column;padding:env(safe-area-inset-top) 20px env(safe-area-inset-bottom);box-sizing:border-box}.login-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:28px;font-weight:700;margin:24px 0 12px}.login-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none}.login-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.background-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:url(/assets/bglogin.jpg) no-repeat center center/cover;filter:blur(6px);opacity:.3;z-index:0}.login-wrapper[_ngcontent-%COMP%]{z-index:1;width:100%;display:flex;justify-content:center;margin-top:5vh;padding:1rem}.login-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem 1.5rem;max-width:400px;width:100%;box-shadow:0 10px 28px #00000026;animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out;position:relative}.login-container.adjusted[_ngcontent-%COMP%]{padding:2.5rem 2rem;max-width:400px}.logo-circle[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;overflow:hidden;margin:0 auto 1rem;box-shadow:0 0 8px #0003}.logo-circle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.logo-title[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:700;color:#1e3a8a;margin-bottom:4px}.subtext[_ngcontent-%COMP%]{text-align:center;font-size:.95rem;color:#444;font-style:italic;margin-bottom:1rem}.divider[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#ddd;margin-bottom:1.5rem}.phone-container[_ngcontent-%COMP%]{display:flex;gap:8px;width:100%;max-width:320px;margin-bottom:12px}.phone-container[_ngcontent-%COMP%]   .phone-box[_ngcontent-%COMP%]{--background: #fff;--border-radius: 8px;--border-color: #3e5b94;border:1px solid #3e5b94;height:48px;display:flex;align-items:center;padding-left:8px}.phone-container[_ngcontent-%COMP%]   .prefix-box[_ngcontent-%COMP%]{flex:0 0 80px;justify-content:center}.phone-container[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{flex:1}.phone-container[_ngcontent-%COMP%]   .prefix-label[_ngcontent-%COMP%]{font-size:16px}.phone-container[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:16px;text-align:center;width:100%}ion-item.custom-input[_ngcontent-%COMP%]{--background: #f9f9f9;border-radius:8px;margin-bottom:1.2rem;height:55px;font-size:1rem;box-shadow:0 0 0 1px #ccc;transition:box-shadow .2s ease-in-out;--padding-end: 10px;--padding-start: 10px;width:100%;max-width:320px}.input-focused[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #3b82f6!important}.input-focused[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#3b82f6!important;font-weight:600}.center-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .center-text[_ngcontent-%COMP%]{text-align:center}.checkbox-forgot-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:14px;width:100%;max-width:320px;margin-bottom:12px}.checkbox-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.custom-checkbox[_ngcontent-%COMP%]{--checkbox-background-checked: #3e5b94;--border-color-checked: #3e5b94}.login-button[_ngcontent-%COMP%], .login-btn[_ngcontent-%COMP%]{--background: linear-gradient(to right, #3b82f6, #2563eb);--border-radius: 8px;color:#fff;font-weight:700;font-size:1rem;height:44px;width:100%;max-width:320px;margin-bottom:16px;box-shadow:0 4px 12px #3b82f64d}.bottom-text[_ngcontent-%COMP%]{margin-top:12px;text-align:center;font-size:14px}.create-link[_ngcontent-%COMP%]{color:#1e66c8;font-weight:600;text-decoration:underline;cursor:pointer}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}"]})}return g})()}}]);