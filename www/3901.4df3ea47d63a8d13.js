"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3901],{3901:(R,c,l)=>{l.r(c),l.d(c,{ProfilePage:()=>j});var m=l(467),t=l(9420),_=l(2200),g=l(4341),f=l(1471),n=l(3664),d=l(8728),P=l(1815),M=l(8880);const p=()=>({"non-editable":!0}),h=a=>({"edit-gray":a}),C=a=>({"edit-blue":a});function E(a,u){if(1&a){const o=n.RV6();n.j41(0,"ion-item")(1,"ion-label",5),n.EFF(2,"New Password"),n.k0s(),n.j41(3,"ion-input",18),n.mxI("ngModelChange",function(e){d.eBV(o);const s=n.XpG();return n.DH7(s.newPassword,e)||(s.newPassword=e),d.Njj(e)}),n.j41(4,"ion-buttons",3)(5,"ion-button",19),n.bIt("click",function(){d.eBV(o);const e=n.XpG();return d.Njj(e.toggleNewPasswordVisibility())}),n.nrm(6,"ion-icon",20),n.k0s()()()()}if(2&a){const o=n.XpG();n.R7$(3),n.R50("ngModel",o.newPassword),n.Y8G("type",o.showNewPassword?"text":"password"),n.R7$(3),n.Y8G("name",o.showNewPassword?"eye-off":"eye")}}function b(a,u){if(1&a){const o=n.RV6();n.j41(0,"ion-item")(1,"ion-label",5),n.EFF(2,"Confirm Password"),n.k0s(),n.j41(3,"ion-input",18),n.mxI("ngModelChange",function(e){d.eBV(o);const s=n.XpG();return n.DH7(s.confirmPassword,e)||(s.confirmPassword=e),d.Njj(e)}),n.j41(4,"ion-buttons",3)(5,"ion-button",19),n.bIt("click",function(){d.eBV(o);const e=n.XpG();return d.Njj(e.toggleConfirmPasswordVisibility())}),n.nrm(6,"ion-icon",20),n.k0s()()()()}if(2&a){const o=n.XpG();n.R7$(3),n.R50("ngModel",o.confirmPassword),n.Y8G("type",o.showConfirmPassword?"text":"password"),n.R7$(3),n.Y8G("name",o.showConfirmPassword?"eye-off":"eye")}}function w(a,u){1&a&&(n.j41(0,"ion-text",21)(1,"p",22),n.EFF(2,"Passwords do not match."),n.k0s()())}function k(a,u){if(1&a){const o=n.RV6();n.j41(0,"div",23)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),n.EFF(4,"Edit Contact Number"),n.k0s()(),n.j41(5,"ion-card-content")(6,"ion-input",24),n.mxI("ngModelChange",function(e){d.eBV(o);const s=n.XpG();return n.DH7(s.user.contact,e)||(s.user.contact=e),d.Njj(e)}),n.k0s(),n.j41(7,"ion-button",25),n.bIt("click",function(){d.eBV(o);const e=n.XpG();return d.Njj(e.closeModal())}),n.EFF(8,"Save"),n.k0s()()()()}if(2&a){const o=n.XpG();n.R7$(6),n.R50("ngModel",o.user.contact)}}let j=(()=>{class a{constructor(o,r,e){this.registrationService=o,this.toastCtrl=r,this.navCtrl=e,this.user={},this.isEditing=!1,this.isContactModalOpen=!1,this.newPassword="",this.confirmPassword="",this.showNewPassword=!1,this.showConfirmPassword=!1}goBack(){this.navCtrl.back()}ionViewWillEnter(){this.user=this.registrationService.getCurrentUser()}toggleEdit(){var o=this;return(0,m.A)(function*(){if(o.isEditing){if(o.newPassword||o.confirmPassword){if(o.newPassword!==o.confirmPassword)return void o.presentToast("\u26a0\ufe0f Passwords do not match.","danger");o.user.password=f.SHA256(o.newPassword).toString()}yield o.registrationService.updateUser(o.user),o.presentToast("\u2705 Changes saved successfully.","success"),o.newPassword="",o.confirmPassword=""}o.isEditing=!o.isEditing})()}toggleNewPasswordVisibility(){this.showNewPassword=!this.showNewPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}openContactModal(){this.isEditing&&(this.isContactModalOpen=!0)}closeModal(){this.isContactModalOpen=!1}updateContactNumber(o){this.user.contact=o,this.closeModal(),this.presentToast("\u{1f4f1} Contact number updated!","success")}presentToast(o,r){var e=this;return(0,m.A)(function*(){yield(yield e.toastCtrl.create({message:o,duration:2e3,position:"top",color:r})).present()})()}static#n=this.\u0275fac=function(r){return new(r||a)(n.rXU(P.f),n.rXU(t.K_),n.rXU(M.q9))};static#e=this.\u0275cmp=n.VBU({type:a,selectors:[["app-profile"]],decls:63,vars:34,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["slot","end"],[1,"ion-padding"],["position","stacked"],["readonly","",3,"ngModelChange","ngModel","ngClass"],[3,"ngModelChange","ngModel","readonly","ngClass"],[3,"ngModelChange","ngModel","disabled"],["value","Male"],["value","Female"],["display-format","MMM DD, YYYY",3,"ngModelChange","ngModel","readonly"],[3,"click","button"],[3,"ngModelChange","ngModel","readonly"],["readonly","",3,"value"],[4,"ngIf"],["color","danger",4,"ngIf"],["class","contact-modal",4,"ngIf"],[3,"ngModelChange","ngModel","type"],["fill","clear",3,"click"],[3,"name"],["color","danger"],[1,"ion-padding-start"],[1,"contact-modal"],["type","tel",3,"ngModelChange","ngModel"],["expand","block",3,"click"]],template:function(r,e){1&r&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),n.bIt("click",function(){return e.goBack()}),n.nrm(4,"ion-icon",2),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"Profile Information"),n.k0s(),n.j41(7,"ion-buttons",3)(8,"ion-button",1),n.bIt("click",function(){return e.toggleEdit()}),n.EFF(9),n.k0s()()()(),n.j41(10,"ion-content",4)(11,"ion-item")(12,"ion-label",5),n.EFF(13,"First Name"),n.k0s(),n.j41(14,"ion-input",6),n.mxI("ngModelChange",function(i){return n.DH7(e.user.firstName,i)||(e.user.firstName=i),i}),n.k0s()(),n.j41(15,"ion-item")(16,"ion-label",5),n.EFF(17,"Middle Name"),n.k0s(),n.j41(18,"ion-input",7),n.mxI("ngModelChange",function(i){return n.DH7(e.user.middleName,i)||(e.user.middleName=i),i}),n.k0s()(),n.j41(19,"ion-item")(20,"ion-label",5),n.EFF(21,"Last Name"),n.k0s(),n.j41(22,"ion-input",6),n.mxI("ngModelChange",function(i){return n.DH7(e.user.lastName,i)||(e.user.lastName=i),i}),n.k0s()(),n.j41(23,"ion-item")(24,"ion-label",5),n.EFF(25,"Gender"),n.k0s(),n.j41(26,"ion-select",8),n.mxI("ngModelChange",function(i){return n.DH7(e.user.gender,i)||(e.user.gender=i),i}),n.j41(27,"ion-select-option",9),n.EFF(28,"Male"),n.k0s(),n.j41(29,"ion-select-option",10),n.EFF(30,"Female"),n.k0s()()(),n.j41(31,"ion-item")(32,"ion-label",5),n.EFF(33,"Date of Birth"),n.k0s(),n.j41(34,"ion-datetime",11),n.mxI("ngModelChange",function(i){return n.DH7(e.user.dob,i)||(e.user.dob=i),i}),n.k0s()(),n.j41(35,"ion-item",12),n.bIt("click",function(){return e.isEditing&&e.openContactModal()}),n.j41(36,"ion-label",5),n.EFF(37,"Contact Number"),n.k0s(),n.j41(38,"ion-input",6),n.mxI("ngModelChange",function(i){return n.DH7(e.user.contact,i)||(e.user.contact=i),i}),n.k0s()(),n.j41(39,"ion-item")(40,"ion-label",5),n.EFF(41,"Purok"),n.k0s(),n.j41(42,"ion-input",13),n.mxI("ngModelChange",function(i){return n.DH7(e.user.purok,i)||(e.user.purok=i),i}),n.k0s()(),n.j41(43,"ion-item")(44,"ion-label",5),n.EFF(45,"Barangay"),n.k0s(),n.j41(46,"ion-input",13),n.mxI("ngModelChange",function(i){return n.DH7(e.user.barangay,i)||(e.user.barangay=i),i}),n.k0s()(),n.j41(47,"ion-item")(48,"ion-label",5),n.EFF(49,"City"),n.k0s(),n.j41(50,"ion-input",13),n.mxI("ngModelChange",function(i){return n.DH7(e.user.city,i)||(e.user.city=i),i}),n.k0s()(),n.j41(51,"ion-item")(52,"ion-label",5),n.EFF(53,"Province"),n.k0s(),n.j41(54,"ion-input",13),n.mxI("ngModelChange",function(i){return n.DH7(e.user.province,i)||(e.user.province=i),i}),n.k0s()(),n.j41(55,"ion-item")(56,"ion-label",5),n.EFF(57,"Password"),n.k0s(),n.nrm(58,"ion-input",14),n.k0s(),n.DNE(59,E,7,3,"ion-item",15)(60,b,7,3,"ion-item",15)(61,w,3,0,"ion-text",16),n.k0s(),n.DNE(62,k,9,1,"div",17)),2&r&&(n.R7$(9),n.SpI(" ",e.isEditing?"Save":"Edit"," "),n.R7$(5),n.R50("ngModel",e.user.firstName),n.Y8G("ngClass",n.lJ4(28,p)),n.R7$(4),n.R50("ngModel",e.user.middleName),n.Y8G("readonly",!e.isEditing)("ngClass",n.eq3(29,h,e.isEditing)),n.R7$(4),n.R50("ngModel",e.user.lastName),n.Y8G("ngClass",n.lJ4(31,p)),n.R7$(4),n.R50("ngModel",e.user.gender),n.Y8G("disabled",!e.isEditing),n.R7$(8),n.R50("ngModel",e.user.dob),n.Y8G("readonly",!e.isEditing),n.R7$(),n.Y8G("button",e.isEditing),n.R7$(3),n.R50("ngModel",e.user.contact),n.Y8G("ngClass",n.eq3(32,C,e.isEditing)),n.R7$(4),n.R50("ngModel",e.user.purok),n.Y8G("readonly",!e.isEditing),n.R7$(4),n.R50("ngModel",e.user.barangay),n.Y8G("readonly",!e.isEditing),n.R7$(4),n.R50("ngModel",e.user.city),n.Y8G("readonly",!e.isEditing),n.R7$(4),n.R50("ngModel",e.user.province),n.Y8G("readonly",!e.isEditing),n.R7$(4),n.Y8G("value","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"),n.R7$(),n.Y8G("ngIf",e.isEditing),n.R7$(),n.Y8G("ngIf",e.isEditing),n.R7$(),n.Y8G("ngIf",e.isEditing&&e.newPassword!==e.confirmPassword&&e.confirmPassword),n.R7$(),n.Y8G("ngIf",e.isContactModalOpen))},dependencies:[t.bv,t.Jm,t.QW,t.b_,t.I9,t.ME,t.tN,t.W9,t.A9,t.eU,t.iq,t.$w,t.uz,t.he,t.Nm,t.Ip,t.IO,t.BC,t.ai,t.Je,t.Gw,_.MD,_.YU,_.bT,g.YN,g.BC,g.vS],styles:["ion-item[_ngcontent-%COMP%]{--background: #f9f9f9;--padding-start: 12px;--inner-padding-end: 12px;--border-radius: 10px;--highlight-height: 0;margin-bottom:12px;box-shadow:0 1px 3px #0000000d;transition:background .3s}ion-label[_ngcontent-%COMP%]{font-weight:500;color:#444;font-size:14px}ion-input[_ngcontent-%COMP%]{font-size:15px;color:#000;transition:color .3s,border .3s;border-bottom:1px solid transparent}ion-input[readonly][_ngcontent-%COMP%]{color:#999;border-bottom:1px dashed #ccc}ion-input.editable[_ngcontent-%COMP%]{color:#007bff;border-bottom:1px solid #007bff}.contact-highlight[_ngcontent-%COMP%]{color:#28a745;font-weight:700}.edit-mode[_ngcontent-%COMP%]{background:#e8f4ff!important}ion-button[_ngcontent-%COMP%]{margin-top:20px}"]})}return a})()}}]);