"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4291],{4291:(j,p,c)=>{c.r(p),c.d(p,{ReleasedDocumentsPage:()=>k});var g=c(467),d=c(2200),l=c(4341),m=c(6908),i=c(9420),e=c(3664),a=c(8728),h=c(6316);function D(s,r){if(1&s){const t=e.RV6();e.j41(0,"ion-button",20),e.bIt("click",function(){a.eBV(t);const n=e.XpG().$implicit,u=e.XpG();return a.Njj(u.markAsReleased(n))}),e.EFF(1," Release "),e.k0s()}}function P(s,r){if(1&s){const t=e.RV6();e.j41(0,"ion-row")(1,"ion-col",10),e.EFF(2),e.k0s(),e.j41(3,"ion-col",11),e.EFF(4),e.k0s(),e.j41(5,"ion-col",12),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"ion-col",13)(9,"ion-text",17),e.EFF(10),e.k0s()(),e.j41(11,"ion-col",13)(12,"ion-button",18),e.bIt("click",function(){const n=a.eBV(t).$implicit,u=e.XpG();return a.Njj(u.openInstructions(n))}),e.EFF(13," View Instructions "),e.k0s(),e.DNE(14,D,2,0,"ion-button",19),e.k0s()()}if(2&s){const t=r.$implicit,o=r.index,n=e.XpG();e.R7$(2),e.JRh(o+1+(n.currentPage-1)*n.itemsPerPage),e.R7$(2),e.JRh(t.documentType),e.R7$(2),e.JRh(e.i5U(7,5,t.timestamp,"shortDate")),e.R7$(4),e.JRh(t.status),e.R7$(4),e.Y8G("ngIf","For Pickup"===t.status)}}function F(s,r){if(1&s){const t=e.RV6();e.j41(0,"ion-row",21)(1,"ion-button",22),e.bIt("click",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.prevPage())}),e.EFF(2,"Prev"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"ion-button",22),e.bIt("click",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.nextPage())}),e.EFF(6,"Next"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",1===t.currentPage),e.R7$(3),e.Lme("Page ",t.currentPage," of ",t.totalPages),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages)}}function R(s,r){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3,"Instruction for Claiming:"),e.k0s()(),e.j41(4,"ol")(5,"li"),e.EFF(6,"Bring 1 valid government-issued ID (e.g., UMID, PhilHealth, Student ID)."),e.k0s(),e.j41(7,"li"),e.EFF(8,"Bring the exact amount, if possible, for faster processing."),e.k0s()(),e.j41(9,"p")(10,"strong"),e.EFF(11,"If you can\u2019t pick up personally:"),e.k0s()(),e.j41(12,"ol")(13,"li"),e.EFF(14,"Provide an authorization letter."),e.k0s(),e.j41(15,"li"),e.EFF(16,"Attach a photocopy of your valid ID and your representative\u2019s ID."),e.k0s()(),e.j41(17,"ion-text",27)(18,"p"),e.EFF(19,"\u26a0\ufe0f Failure to claim within 6 months will result in cancellation."),e.k0s()(),e.j41(20,"ion-button",28),e.bIt("click",function(){a.eBV(t);const n=e.XpG(2);return a.Njj(n.markAsReleased(n.selectedDocument))}),e.EFF(21," Mark as Released "),e.k0s()()}}function E(s,r){1&s&&(e.j41(0,"div")(1,"ion-text",29)(2,"p"),e.EFF(3,"This document has already been released."),e.k0s()()())}function f(s,r){if(1&s){const t=e.RV6();e.j41(0,"ion-modal")(1,"ion-header")(2,"ion-toolbar",23)(3,"ion-title"),e.EFF(4,"Instructions"),e.k0s(),e.j41(5,"ion-buttons",2)(6,"ion-button",24),e.bIt("click",function(){a.eBV(t);const n=e.XpG();return a.Njj(n.closeModal())}),e.nrm(7,"ion-icon",25),e.k0s()()()(),e.j41(8,"ion-content",26)(9,"p")(10,"strong"),e.EFF(11,"Document:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p")(14,"strong"),e.EFF(15,"Date Approved:"),e.k0s(),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"p")(19,"strong"),e.EFF(20,"Pickup Schedule:"),e.k0s(),e.EFF(21," Monday to Friday, 8:00 AM - 5:00 PM"),e.k0s(),e.j41(22,"p")(23,"strong"),e.EFF(24,"Status:"),e.k0s(),e.j41(25,"ion-text",17),e.EFF(26),e.k0s()(),e.DNE(27,R,22,0,"div",16)(28,E,4,0,"div",16),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(12),e.SpI(" ",null==t.selectedDocument?null:t.selectedDocument.documentType),e.R7$(4),e.SpI(" ",e.i5U(17,5,null==t.selectedDocument?null:t.selectedDocument.timestamp,"longDate")),e.R7$(10),e.JRh(null==t.selectedDocument?null:t.selectedDocument.status),e.R7$(),e.Y8G("ngIf","For Pickup"===(null==t.selectedDocument?null:t.selectedDocument.status)),e.R7$(),e.Y8G("ngIf","For Pickup"!==(null==t.selectedDocument?null:t.selectedDocument.status))}}let k=(()=>{class s{constructor(t){this.requestService=t,this.releasedDocuments=[],this.paginatedDocuments=[],this.selectedDocument=null,this.currentPage=1,this.pageSize=5,this.totalPages=0,this.itemsPerPage=5,this.showModal=!1,this.searchTerm=""}ngOnInit(){var t=this;return(0,g.A)(function*(){yield t.loadReleasedDocuments()})()}loadReleasedDocuments(){var t=this;return(0,g.A)(function*(){try{t.releasedDocuments=yield t.requestService.getReleasedDocuments(),t.filterDocuments()}catch(o){console.error("Error fetching released documents:",o)}})()}paginateDocuments(){this.totalPages=Math.ceil(this.releasedDocuments.length/this.itemsPerPage);const t=(this.currentPage-1)*this.itemsPerPage;this.paginatedDocuments=this.releasedDocuments.slice(t,t+this.itemsPerPage)}filterDocuments(){if(""===this.searchTerm.trim())this.paginatedDocuments=[...this.releasedDocuments];else{const t=this.releasedDocuments.filter(o=>o.documentType.toLowerCase().includes(this.searchTerm.toLowerCase()));this.paginatedDocuments=t}this.totalPages=Math.ceil(this.paginatedDocuments.length/this.itemsPerPage),this.currentPage=1,this.paginateDocuments()}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.paginateDocuments())}prevPage(){this.currentPage>1&&(this.currentPage--,this.paginateDocuments())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.paginateDocuments())}markAsReleased(t){var o=this;return(0,g.A)(function*(){try{yield o.requestService.updateStatus(t.id,"Released"),yield o.loadReleasedDocuments(),o.closeModal()}catch(n){console.error("Error updating document status:",n)}})()}openInstructions(t){this.selectedDocument=t,this.showModal=!0}closeModal(){this.selectedDocument=null,this.showModal=!1}viewDetails(t){this.selectedDocument=t}clearSelectedDocument(){this.selectedDocument=null}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(h.s))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-released-documents"]],decls:37,vars:10,consts:[[3,"translucent"],["slot","start"],["slot","end"],["name","notifications-outline","slot","icon-only"],[1,"ion-padding",3,"fullscreen"],[1,"table-controls"],[3,"ngModelChange","change","ngModel"],[3,"value"],["type","text","placeholder","Search...",3,"ngModelChange","input","ngModel"],[1,"table-header"],["size","1"],["size","4"],["size","3"],["size","2"],[4,"ngFor","ngForOf"],["class","pagination-controls",4,"ngIf"],[4,"ngIf"],["color","primary"],["size","small","color","medium",3,"click"],["size","small","color","success",3,"click",4,"ngIf"],["size","small","color","success",3,"click"],[1,"pagination-controls"],["size","small",3,"click","disabled"],["color","light"],[3,"click"],["name","close-outline"],[1,"ion-padding"],["color","warning"],["expand","block","color","success",3,"click"],["color","success"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Released Documents"),e.k0s(),e.j41(6,"ion-buttons",2)(7,"ion-button"),e.nrm(8,"ion-icon",3),e.k0s()()()(),e.j41(9,"ion-content",4)(10,"div",5)(11,"label"),e.EFF(12," Show "),e.j41(13,"select",6),e.mxI("ngModelChange",function(_){return e.DH7(n.itemsPerPage,_)||(n.itemsPerPage=_),_}),e.bIt("change",function(){return n.paginateDocuments()}),e.j41(14,"option",7),e.EFF(15,"5"),e.k0s(),e.j41(16,"option",7),e.EFF(17,"10"),e.k0s(),e.j41(18,"option",7),e.EFF(19,"25"),e.k0s()(),e.EFF(20," entries "),e.k0s(),e.j41(21,"input",8),e.mxI("ngModelChange",function(_){return e.DH7(n.searchTerm,_)||(n.searchTerm=_),_}),e.bIt("input",function(){return n.filterDocuments()}),e.k0s()(),e.j41(22,"ion-grid")(23,"ion-row",9)(24,"ion-col",10),e.EFF(25,"#"),e.k0s(),e.j41(26,"ion-col",11),e.EFF(27,"Document"),e.k0s(),e.j41(28,"ion-col",12),e.EFF(29,"Date Approved"),e.k0s(),e.j41(30,"ion-col",13),e.EFF(31,"Status"),e.k0s(),e.j41(32,"ion-col",13),e.EFF(33,"Action"),e.k0s()(),e.DNE(34,P,15,8,"ion-row",14),e.k0s(),e.DNE(35,F,7,4,"ion-row",15),e.k0s(),e.DNE(36,f,29,8,"ion-modal",16)),2&o&&(e.Y8G("translucent",!0),e.R7$(9),e.Y8G("fullscreen",!0),e.R7$(4),e.R50("ngModel",n.itemsPerPage),e.R7$(),e.Y8G("value",5),e.R7$(2),e.Y8G("value",10),e.R7$(2),e.Y8G("value",25),e.R7$(3),e.R50("ngModel",n.searchTerm),e.R7$(13),e.Y8G("ngForOf",n.paginatedDocuments),e.R7$(),e.Y8G("ngIf",n.totalPages>1),e.R7$(),e.Y8G("ngIf",n.showModal))},dependencies:[m.W9,i.bv,i.Jm,i.QW,i.hU,i.W9,i.lO,i.eU,i.iq,i.MC,i.ln,i.IO,i.BC,i.ai,i.Sb,m.eU,m.BC,m.ai,d.MD,d.Sq,d.bT,d.vh,l.YN,l.xH,l.y7,l.me,l.wz,l.BC,l.vS],styles:[".table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.table-header[_ngcontent-%COMP%]{font-weight:700;border-bottom:1px solid #ccc;padding-bottom:.5rem}.pagination-controls[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:center;align-items:center;gap:10px}"]})}return s})()}}]);